<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Controle Financeiro</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f4f6f8; }
    header { background:#1e88e5; color:white; padding:15px; text-align:center; font-size:18px; }
    nav { display:flex; justify-content:space-around; background:#ffffff; border-top:1px solid #ccc; position:fixed; bottom:0; width:100%; }
    nav button { flex:1; padding:10px; border:none; background:none; font-size:14px; }
    nav button.active { color:#1e88e5; font-weight:bold; }
    .page { display:none; padding:15px; padding-bottom:70px; }
    .page.active { display:block; }
    .card { background:white; padding:15px; margin-bottom:10px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    input, select, button { width:100%; padding:8px; margin-top:5px; margin-bottom:10px; }
    button.primary { background:#1e88e5; color:white; border:none; border-radius:5px; }
  </style>
</head>
<body><header>üìä Controle Financeiro</header><div id="inicio" class="page active">
  <div class="card"><h3>Saldo Atual</h3><p id="saldo">R$ 0,00</p></div>
  <div class="card"><h3>Total Recebido</h3><p id="recebido">R$ 0,00</p></div>
  <div class="card"><h3>Total Gasto</h3><p id="gasto">R$ 0,00</p></div>
</div><div id="lancamentos" class="page">
  <div class="card">
    <h3>Novo Lan√ßamento</h3>
    <select id="tipo">
      <option value="receita">Receita</option>
      <option value="despesa">Despesa</option>
    </select>
    <input type="number" id="valor" placeholder="Valor" />
    <select id="categoria">
      <option>Alimenta√ß√£o</option>
      <option>Combust√≠vel</option>
      <option>Cart√µes</option>
      <option>Empr√©stimos</option>
      <option>Outros</option>
    </select>
    <button class="primary" onclick="adicionar()">Salvar</button>
  </div>
</div><div id="relatorios" class="page">
  <div class="card">
    <canvas id="grafico"></canvas>
  </div>
</div><div id="config" class="page">
  <div class="card">
    <h3>Backup</h3>
    <button onclick="exportar()">Exportar Dados</button>
    <input type="file" onchange="importar(event)" />
  </div>
</div><nav>
  <button onclick="trocar('inicio')" class="active">üè† In√≠cio</button>
  <button onclick="trocar('lancamentos')">‚ûï Lan√ßar</button>
  <button onclick="trocar('relatorios')">üìä Relat√≥rios</button>
  <button onclick="trocar('config')">‚öôÔ∏è Config</button>
</nav><script>
let dados = JSON.parse(localStorage.getItem('dados')) || [];

function trocar(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('nav button').forEach(b=>b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  event.target.classList.add('active');
  atualizar();
}

function adicionar(){
  const tipo = tipoEl.value;
  const valor = Number(valorEl.value);
  const categoria = categoriaEl.value;
  if(!valor) return;
  dados.push({tipo, valor, categoria});
  localStorage.setItem('dados', JSON.stringify(dados));
  valorEl.value='';
  atualizar();
}

const tipoEl = document.getElementById('tipo');
const valorEl = document.getElementById('valor');
const categoriaEl = document.getElementById('categoria');

function atualizar(){
  let recebido = 0, gasto = 0;
  dados.forEach(d=>{
    if(d.tipo==='receita') recebido+=d.valor;
    else gasto+=d.valor;
  });
  document.getElementById('recebido').innerText = 'R$ ' + recebido.toFixed(2);
  document.getElementById('gasto').innerText = 'R$ ' + gasto.toFixed(2);
  document.getElementById('saldo').innerText = 'R$ ' + (recebido-gasto).toFixed(2);
  grafico();
}

let chart;
function grafico(){
  const ctx = document.getElementById('grafico');
  const categorias = {};
  dados.filter(d=>d.tipo==='despesa').forEach(d=>{
    categorias[d.categoria]=(categorias[d.categoria]||0)+d.valor;
  });
  if(chart) chart.destroy();
  chart = new Chart(ctx, {
    type:'pie',
    data:{ labels:Object.keys(categorias), datasets:[{ data:Object.values(categorias) }] }
  });
}

function exportar(){
  const blob = new Blob([JSON.stringify(dados)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'backup-financeiro.json';
  a.click();
}

function importar(e){
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = ()=>{
    dados = JSON.parse(reader.result);
    localStorage.setItem('dados', JSON.stringify(dados));
    atualizar();
  };
  reader.readAsText(file);
}

atualizar();
</script></body>
</html>
